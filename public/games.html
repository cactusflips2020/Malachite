<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title is="chemical-title" data-title-store>Malachite</title>
		<link rel="icon" is="chemical-icon" data-icon-store href="img/favicon.ico">
		<link rel="stylesheet" href="css/index.css">
		<link rel="stylesheet" href="css/transitions.css">
        <link rel="stylesheet" href="css/games.css">
		<script src="/chemical.js"></script>
		<script src="/chemical.components.js"></script>
		<script src="/chemical.cloaking.js"></script>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	</head>
	<body>
		<div id="particles-js"></div>
		<div class="navbar">
			<div class="logo-container">
				<a href="index.html">
					<img src="/img/logo.png" alt="Logo">
				</a>
				<a href="index.html">Malachite</a>
			</div>
			<div class="nav-links">
				<a href="games.html">
					<i class="fa-solid fa-gamepad"></i> Games
				</a>
				<a href="apps.html">
					<i class="fa-solid fa-border-all"></i> Apps
				</a>
				<a href="settings.html">
					<i class="fa-solid fa-gear"></i> Settings
				</a>
			</div>
		</div>	
			<input type="text" id="search-input" placeholder="Search games..." />
			<div class="games-container" id="games-container"></div>
			
		<script src="js/particles.min.js"></script>
		<script src="/js/games.js" defer></script>
		<script src="js/main.js"></script>
		<script src="js/transitions.js" defer></script>	
		<script>
			// Theme-based particle configurations
			const particleConfigs = {
				moss: {
					particles: {
						number: { value: 40, density: { enable: true, value_area: 800 } },
						color: { value: ['#b2c2a8', '#94e2d5', '#a6e3a1', '#89dceb'] },
						shape: { type: 'circle' },
						opacity: { value: 0.3, random: true, anim: { enable: false, speed: 1, opacity_min: 0.1, sync: false } },
						size: { value: 2, random: true, anim: { enable: false, speed: 2, size_min: 1, sync: false } },
						line_linked: { enable: true, distance: 200, color: '#b2c2a8', opacity: 0.2, width: 0.5 },
						move: { enable: true, speed: 1.5, direction: 'none', random: true, straight: false, out_mode: 'bounce', bounce: true, attract: { enable: false, rotateX: 600, rotateY: 1200 } }
					},
					interactivity: {
						detect_on: 'canvas',
						events: {
							onhover: { enable: false, mode: 'repulse' },
							onclick: { enable: false, mode: 'push' },
							resize: true
						},
						modes: {
							grab: { distance: 140, line_linked: { opacity: 1 } },
							bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 },
							repulse: { distance: 150, duration: 0.4 },
							push: { particles_nb: 4 },
							remove: { particles_nb: 2 }
						}
					},
					retina_detect: true
				},
				midnight: {
					particles: {
						number: { value: 50, density: { enable: true, value_area: 800 } },
						color: { value: ['#b8c7e0', '#81a1c1', '#5e81ac', '#88c0d0'] },
						shape: { type: 'circle' },
						opacity: { value: 0.4, random: true, anim: { enable: false, speed: 1.5, opacity_min: 0.2, sync: false } },
						size: { value: 2.5, random: true, anim: { enable: false, speed: 4, size_min: 1, sync: false } },
						line_linked: { enable: true, distance: 180, color: '#b8c7e0', opacity: 0.25, width: 0.5 },
						move: { enable: true, speed: 2, direction: 'none', random: true, straight: false, out_mode: 'bounce', bounce: true, attract: { enable: false, rotateX: 600, rotateY: 1200 } }
					},
					interactivity: {
						detect_on: 'canvas',
						events: {
							onhover: { enable: false, mode: 'grab' },
							onclick: { enable: false, mode: 'push' },
							resize: true
						},
						modes: {
							grab: { distance: 140, line_linked: { opacity: 1 } },
							bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 },
							repulse: { distance: 200, duration: 0.4 },
							push: { particles_nb: 4 },
							remove: { particles_nb: 2 }
						}
					},
					retina_detect: true
				},
				rose: {
					particles: {
						number: { value: 35, density: { enable: true, value_area: 800 } },
						color: { value: ['#e0b8c7', '#f38ba8', '#eba0ac', '#f5c2e7'] },
						shape: { type: 'circle' },
						opacity: { value: 0.35, random: true, anim: { enable: false, speed: 1.2, opacity_min: 0.2, sync: false } },
						size: { value: 2.2, random: true, anim: { enable: false, speed: 2.5, size_min: 1, sync: false } },
						line_linked: { enable: true, distance: 220, color: '#e0b8c7', opacity: 0.2, width: 0.5 },
						move: { enable: true, speed: 1.8, direction: 'none', random: true, straight: false, out_mode: 'bounce', bounce: true, attract: { enable: false, rotateX: 600, rotateY: 1200 } }
					},
					interactivity: {
						detect_on: 'canvas',
						events: {
							onhover: { enable: false, mode: 'bubble' },
							onclick: { enable: false, mode: 'push' },
							resize: true
						},
						modes: {
							grab: { distance: 140, line_linked: { opacity: 1 } },
							bubble: { distance: 200, size: 40, duration: 2, opacity: 8, speed: 3 },
							repulse: { distance: 200, duration: 0.4 },
							push: { particles_nb: 4 },
							remove: { particles_nb: 2 }
						}
					},
					retina_detect: true
				},
				noir: {
					particles: {
						number: { value: 30, density: { enable: true, value_area: 800 } },
						color: { value: ['#e0e0e0', '#c0c0c0', '#a0a0a0', '#808080'] },
						shape: { type: 'circle' },
						opacity: { value: 0.25, random: true, anim: { enable: false, speed: 1, opacity_min: 0.1, sync: false } },
						size: { value: 1.8, random: true, anim: { enable: false, speed: 3, size_min: 1, sync: false } },
						line_linked: { enable: true, distance: 250, color: '#e0e0e0', opacity: 0.15, width: 0.5 },
						move: { enable: true, speed: 1.2, direction: 'none', random: true, straight: false, out_mode: 'bounce', bounce: true, attract: { enable: false, rotateX: 600, rotateY: 1200 } }
					},
					interactivity: {
						detect_on: 'canvas',
						events: {
							onhover: { enable: false, mode: 'repulse' },
							onclick: { enable: false, mode: 'push' },
							resize: true
						},
						modes: {
							grab: { distance: 140, line_linked: { opacity: 1 } },
							bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 },
							repulse: { distance: 180, duration: 0.4 },
							push: { particles_nb: 4 },
							remove: { particles_nb: 2 }
						}
					},
					retina_detect: true
				}
			};

			// Function to initialize particles with current theme
			function initializeParticles() {
				const currentTheme = localStorage.getItem('siteTheme') || 'moss';
				const config = particleConfigs[currentTheme];
				
				console.log('Initializing particles for theme:', currentTheme);
				if (typeof particlesJS !== 'undefined' && config) {
					particlesJS('particles-js', config);
					console.log('Particles initialized successfully for theme:', currentTheme);
				} else {
					console.log('ParticlesJS not available or config not found');
				}
			}

			// Initialize particles on page load
			window.addEventListener('load', initializeParticles);

			// Reinitialize particles when theme changes
			window.addEventListener('storage', function(e) {
				if (e.key === 'siteTheme') {
					// Clean up existing particles
					if (typeof pJSDom !== 'undefined' && pJSDom.length > 0) {
						pJSDom[0].pJS.fn.vendors.destroypJS();
						pJSDom = [];
					}
					// Reinitialize with new theme
					setTimeout(initializeParticles, 100);
				}
			});
		</script>
	</body>
</html>